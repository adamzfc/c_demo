<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0048)http://staff.ustc.edu.cn/~bjhua/mooc/semant.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=GBK">

<title>C--</title>
</head>
<body>
<font face="Trebuchet MS">
<table width="100%">
<tbody><tr>
<td>
<h3>C--语言的语义分析器</h3>
在这个作业中，要求你给C--语言实现一个语义分析器（类型检查器）。

<h3>C--语言的语法</h3>
C--语言的语法由如下的上下文无关文法定义。

<pre>prog   -&gt; { decs stms }
decs   -&gt; dec decs
        |
dec    -&gt; type id ;
type   -&gt; <b>int</b>
        | <b>bool</b>
stms   -&gt; stm stms
        |
stm    -&gt; id = exp ;
        | <b>printi</b>(exp) ;
        | <b>printb</b>(exp) ;
exp    -&gt; intnum
        | <b>true</b>
        | <b>false</b>
        | id
        | (exp)
        | exp + exp
        | exp - exp
        | exp * exp
        | exp / exp
        | exp &amp;&amp; exp
        | exp || exp
</pre>
每个程序prog由一个程序块组成（注意一对左右花括号）；程序块包括变量声明列表
decs和语句列表stms两部分。

<p>
变量声明列表decs包含零个或多个声明dec，每一个声明dec的形式
都是type id；其中id是变量名，type是类型。一共有两种不同形式的类型：
<b>int</b>和<b>bool</b>，他们都是程序的保留关键字；保留关键字用黑体表示。

</p><p>
语句列表stms包含零个或多个语句stm，每一个语句stm可能有三种不同的形式：
赋值语句、整型值打印语句和布尔值打印语句。每条语句都以分号分隔。
赋值语句id=exp将exp的值赋值给变量id；整型值打印<b>printi</b>(exp)
把exp的值打印到标准输出，并以换行符结尾；布尔值打印<b>printb</b>(exp)
把exp的值打印到标准输出，并以换行符结尾。注意：
<b>printi</b>和<b>printb</b>是程序的保留关键字。

</p><p>
表达式exp包括整型值常数intnum、布尔常数true和false、变量id、
括号表达式(exp)以及四种整数运算及两种布尔运算。

</p><h3>语义规则</h3>
C--语言的语义规则如下（方括号里的编号R1，R2等表示规则的编号，
这个编号将在代码中直接引用）：
<ul>
<li>[R1] 每个变量使用前必须先声明；
</li><li>[R2] 每个变量最多声明一次，即变量不能重复声明；
</li><li>[R3] 赋值语句左侧变量的类型必须和右侧表达式的类型一致；
</li><li>[R4] 整型值打印语句的参数表达式必须是整型；
</li><li>[R5] 布尔值打印语句的参数表达式必须是布尔型；
</li><li>[R6] 四种整型运算的操作数的类型必须都是整型；
</li><li>[R7] 两种布尔运算的操作数的类型必须都是布尔类型。
</li></ul>

<h3>任务</h3>
首先下载我们提供的代码框架：
<p>
<a href="http://staff.ustc.edu.cn/~bjhua/mooc/semant.zip">http://staff.ustc.edu.cn/~bjhua/mooc/semant.zip</a>
</p><p>
首先编译该代码：
</p><pre>  $ make
</pre>
然后运行给定的测试例：
<pre>  $ ./a.out &lt; test.txt
</pre>

其中已经提供了词法分析、语法分析、抽象语法树、语义分析
等模块；你的任务是在语义分析模块semant.c中添加缺少的代码，将其补充完整，
能对任意C--程序做语义分析；即对上面的七条规则做检查，对不符合这些规则的程序报错。

</td>
</tr>
</tbody></table>

</font>


</body><div></div></html>